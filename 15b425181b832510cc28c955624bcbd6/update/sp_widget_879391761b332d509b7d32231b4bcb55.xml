<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {
  /* widget controller */
  var c = this;
		
	c.sanitizeEmail = function (email) {
		return $sce.trustAsUrl('mailto:' + email);
	}
	
	c.progressColor = function (pendingTask, pendingTaskTotal) {
		var progress = pendingTask / pendingTaskTotal;
		
		if (progress <= 0.33) {
			return '#f44a3f';
		}

		if (progress < 0.8) {
			return '#f4733f'
		}
		
		return '#0fa397';
	}
};]]></client_script>
        <controller_as>c</controller_as>
        <css>
h3, h4 {
  margin-top: 0;  	
  color: #36424F;
  font-weight: bold;
}

h4 {
  margin-top: 24px;
  font-size: 20px;
}

table {
  width: 100%;

  th, td {
    border: 1px solid #EAEDEE;
  }

  th {
    padding: 16px;
    font-size: 16px;
  }

  th p {
    margin-bottom: 0;
   	display: flex;
    align-items: center;
    justify-content: space-evenly;
    min-width: 95px;
    width: 100%;
    white-space: nowrap;

    img {
      margin-left: 4px;
      
      height: 24px;
      width: 24px;
  	}
  }
  
  td {
    padding: 12px;
    font-size: 14px;
  }

  thead tr {
    background-color: #F9FBFC;
  }

  a {
    text-align: center;
    display: flex;
    height: 100%;
    width: 100%;
    justify-content: center;
    align-items: center;
  }

  svg {
    height: 20px;
  }
}

.ino-dow-manager-employees-table-progress {
	display: flex;
  flex-direction: column;
  justify-content: flex-end;
  
  label {
    text-align: right;
  	margin-bottom: 0;
  }
}

.ino-dow-manager-employees-table-progress-container {
	height: 9px;
  width: 100%;

  border-radius: 10px;

  border: 1px solid #eaedee;
}

.ino-dow-manager-employees-table-progress-fill {
	height: 100%;
  
  border-radius: 10px;
}

.it-health-score {
	display: flex;
  align-items: center;
  width: 70px;
  justify-content: space-between;
  margin: 0 auto;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>ino_dow_manager_employees_all_org</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>Ino DOW Manager Employees All Organizati</name>
        <option_schema>[{"hint":"The limit of users that will be displayed","name":"limit","section":"Presentation","default_value":"20","label":"Limit","type":"integer"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
	var me = gs.getUserID();
	var allOrgGr = new GlideRecord('sys_user');
	allOrgGr.addQuery('name', '!=', '');
	allOrgGr.orderBy('name');
	allOrgGr.setLimit(options.limit || 20);
	allOrgGr.query();
	
	var allOrgUsers = [];
	
	while(allOrgGr.next()) {
		var pendingTicket = new GlideRecord('ticket');
		pendingTicket.addQuery('assigned_to', '=', me);
		pendingTicket.addQuery('opened_by', '=', allOrgGr.getValue('sys_id'));
		pendingTicket.setLimit(1);
		pendingTicket.query();
		var hasTicket = pendingTicket.next();

		allOrgUsers.push({
			name: allOrgGr.getValue('name'),
			title: allOrgGr.getValue('title') || '-',
			email: allOrgGr.getValue('email'),
			pending: hasTicket ? pendingTicket.getValue('short_description') : '-',
			pendingId: hasTicket ? pendingTicket.getUniqueValue() : undefined,
			itHealth: (allOrgGr.getValue('sys_id').charCodeAt(0) % 100),
			source: allOrgGr.getValue('sys_id').charAt(0) % 2 ? 'workday' : 'servicenow'
		});
	}

	data.allOrgUsers = allOrgUsers;
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>vinicius.lourenco@stefanini.com</sys_created_by>
        <sys_created_on>2023-07-06 17:09:24</sys_created_on>
        <sys_id>879391761b332d509b7d32231b4bcb55</sys_id>
        <sys_mod_count>20</sys_mod_count>
        <sys_name>Ino DOW Manager Employees All Organizati</sys_name>
        <sys_package display_value="Chameleon" source="x_stefa_chameleon">15b425181b832510cc28c955624bcbd6</sys_package>
        <sys_policy/>
        <sys_scope display_value="Chameleon">15b425181b832510cc28c955624bcbd6</sys_scope>
        <sys_update_name>sp_widget_879391761b332d509b7d32231b4bcb55</sys_update_name>
        <sys_updated_by>vinicius.lourenco@stefanini.com</sys_updated_by>
        <sys_updated_on>2023-07-10 13:23:10</sys_updated_on>
        <template><![CDATA[<div class="ino-dow-manager-employees-all-org">
  <h4>
    ${My Direct Reports}
  </h4>

	<table>
    <colgroup>
      <col span="1" style="width: 20%;">
      <col span="1" style="width: 15%;">
      <col span="1" style="width: 10%;">
      <col span="1" style="width: 10%;">
      <col span="1" style="width: 5%;">
      <col span="1" style="width: 5%;">
    </colgroup>

    <thead>
      <tr>
        <th>Name</th>
        <th>Title</th>
        <th style="text-align: center;">Pending Approval</th>
        <th>
          <p>
            IT Health <img src="/x_stefa_chameleon.aternity_logo.png" alt="Aternity">
          </p>
        </th>
        <th colspan="2" align="center">Direct Contact</th>
      </tr>
    </thead>

    <tbody>
      <tr ng-repeat="allOrgUser in c.data.allOrgUsers">
        <td>{{allOrgUser.name}}</td>
        <td>{{allOrgUser.title}}</td>
        <td>
          <a ng-if="allOrgUser.pendingId" href="?id=ticket&table=ticket&sys_id={{allOrgUser.pendingId}}&view=sp">
            {{allOrgUser.pending}}

            <img ng-if="allOrgUser.source === 'workday'" style="margin-left: 4px;" width="20px" height="20px" src="/x_stefa_chameleon.workday.png" alt="Workday">
          </a>
          <p ng-if="!allOrgUser.pendingId" style="text-align: center;">-</p>
        </td>
        <td>
          <div class="it-health-score">
            {{allOrgUser.itHealth}}%

            <svg ng-if="allOrgUser.itHealth >= 90" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18ZM14.59 5.58L8 12.17L5.41 9.59L4 11L8 15L16 7L14.59 5.58Z" fill="#0FA397"/>
            </svg>

            <svg ng-if="allOrgUser.itHealth >= 50 && allOrgUser.itHealth < 90" width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M0 17.2727L10 0L20 17.2727H0ZM2.36364 15.9091H17.6364L10 2.72727L2.36364 15.9091ZM10.0949 14.6136C10.2892 14.6136 10.4508 14.5479 10.5795 14.4165C10.7083 14.285 10.7727 14.1221 10.7727 13.9278C10.7727 13.7335 10.707 13.572 10.5756 13.4432C10.4441 13.3144 10.2812 13.25 10.0869 13.25C9.89261 13.25 9.73106 13.3157 9.60227 13.4472C9.47348 13.5786 9.40909 13.7415 9.40909 13.9358C9.40909 14.1301 9.47481 14.2917 9.60625 14.4205C9.7377 14.5492 9.90058 14.6136 10.0949 14.6136ZM9.40909 12.0909H10.7727V7H9.40909V12.0909Z" fill="#F15D22"/>
            </svg>

            <svg ng-if="allOrgUser.itHealth < 50" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5.83333 20L0 14.1667V5.83333L5.83333 0H14.1667L20 5.83333V14.1667L14.1667 20H5.83333ZM6.58333 14.5833L10 11.1667L13.4167 14.5833L14.5833 13.4167L11.1667 10L14.5833 6.58333L13.4167 5.41667L10 8.83333L6.58333 5.41667L5.41667 6.58333L8.83333 10L5.41667 13.4167L6.58333 14.5833ZM6.52778 18.3333H13.4722L18.3333 13.4722V6.52778L13.4722 1.66667H6.52778L1.66667 6.52778V13.4722L6.52778 18.3333Z" fill="#E80033"/>
            </svg>
          </div>
        </td>
        <td align="center">
          <a ng-if="allOrgUser.email" href="{{c.sanitizeEmail(allOrgUser.email)}}">
            <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 103.173 104.313">
              <path d="M64.567 22.116v20.405l7.13 4.49c.188.054.596.058.784 0l30.688-20.69c0-2.45-2.284-4.205-3.573-4.205h-35.03z" style="fill:#0072c6"/>
              <path d="m64.567 50.133 6.507 4.47c.917.674 2.022 0 2.022 0-1.101.674 30.077-20.036 30.077-20.036V72.07c0 4.083-2.613 5.795-5.551 5.795h-33.06v-27.73z" style="fill:#0072c6"/>
              <path d="M11.321 20.958c-.566 0-1.017.266-1.35.797-.333.531-.5 1.234-.5 2.109 0 .888.167 1.59.5 2.106.333.517.77.774 1.31.774.557 0 .999-.251 1.325-.753.326-.502.49-1.199.49-2.09 0-.929-.158-1.652-.475-2.169-.317-.516-.75-.774-1.3-.774z" style="fill:#0072c6" transform="translate(-13.481 -41.384) scale(3.9179)"/>
              <path d="M3.441 13.563v20.375l15.5 3.25V10.563l-15.5 3zm10.372 13.632c-.655.862-1.509 1.294-2.563 1.294-1.027 0-1.863-.418-2.51-1.253-.646-.836-.97-1.924-.97-3.266 0-1.417.328-2.563.985-3.438s1.527-1.313 2.61-1.313c1.023 0 1.851.418 2.482 1.256.632.838.948 1.942.948 3.313.001 1.409-.327 2.545-.982 3.407z" style="fill:#0072c6" transform="translate(-13.481 -41.384) scale(3.9179)"/>
            </svg>
          </a>
        </td>
        <td align="center">
          <a ng-if="allOrgUser.email" href="https://teams.microsoft.com/l/chat/0/0?users={{allOrgUser.email}}" target="_blank" rel="noopener">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2228.833 2073.333">
              <path fill="#5059C9" d="M1554.637 777.5h575.713c54.391 0 98.483 44.092 98.483 98.483v524.398c0 199.901-162.051 361.952-361.952 361.952h-1.711c-199.901.028-361.975-162-362.004-361.901V828.971c.001-28.427 23.045-51.471 51.471-51.471z"/>
              <circle cx="1943.75" cy="440.583" r="233.25" fill="#5059C9"/>
              <circle cx="1218.083" cy="336.917" r="336.917" fill="#7B83EB"/>
              <path fill="#7B83EB" d="M1667.323 777.5H717.01c-53.743 1.33-96.257 45.931-95.01 99.676v598.105c-7.505 322.519 247.657 590.16 570.167 598.053 322.51-7.893 577.671-275.534 570.167-598.053V877.176c1.245-53.745-41.268-98.346-95.011-99.676z"/>
              <path d="M1244 777.5v838.145c-.258 38.435-23.549 72.964-59.09 87.598a91.856 91.856 0 0 1-35.765 7.257H667.613c-6.738-17.105-12.958-34.21-18.142-51.833a631.287 631.287 0 0 1-27.472-183.49V877.02c-1.246-53.659 41.198-98.19 94.855-99.52H1244z" opacity=".1"/>
              <path d="M1192.167 777.5v889.978a91.838 91.838 0 0 1-7.257 35.765c-14.634 35.541-49.163 58.833-87.598 59.09H691.975c-8.812-17.105-17.105-34.21-24.362-51.833-7.257-17.623-12.958-34.21-18.142-51.833a631.282 631.282 0 0 1-27.472-183.49V877.02c-1.246-53.659 41.198-98.19 94.855-99.52h475.313z" opacity=".2"/>
              <path d="M1192.167 777.5v786.312c-.395 52.223-42.632 94.46-94.855 94.855h-447.84A631.282 631.282 0 0 1 622 1475.177V877.02c-1.246-53.659 41.198-98.19 94.855-99.52h475.312z" opacity=".2"/>
              <path d="M1140.333 777.5v786.312c-.395 52.223-42.632 94.46-94.855 94.855H649.472A631.282 631.282 0 0 1 622 1475.177V877.02c-1.246-53.659 41.198-98.19 94.855-99.52h423.478z" opacity=".2"/>
              <path d="M1244 509.522v163.275c-8.812.518-17.105 1.037-25.917 1.037-8.812 0-17.105-.518-25.917-1.037a284.472 284.472 0 0 1-51.833-8.293c-104.963-24.857-191.679-98.469-233.25-198.003a288.02 288.02 0 0 1-16.587-51.833h258.648c52.305.198 94.657 42.549 94.856 94.854z" opacity=".1"/>
              <path d="M1192.167 561.355v111.442a284.472 284.472 0 0 1-51.833-8.293c-104.963-24.857-191.679-98.469-233.25-198.003h190.228c52.304.198 94.656 42.55 94.855 94.854z" opacity=".2"/>
              <path d="M1192.167 561.355v111.442a284.472 284.472 0 0 1-51.833-8.293c-104.963-24.857-191.679-98.469-233.25-198.003h190.228c52.304.198 94.656 42.55 94.855 94.854z" opacity=".2"/>
              <path d="M1140.333 561.355v103.148c-104.963-24.857-191.679-98.469-233.25-198.003h138.395c52.305.199 94.656 42.551 94.855 94.855z" opacity=".2"/>
              <linearGradient id="a" x1="198.099" x2="942.234" y1="1683.073" y2="394.261" gradientTransform="matrix(1 0 0 -1 0 2075.333)" gradientUnits="userSpaceOnUse">
                <stop offset="0" stop-color="#5a62c3"/>
                <stop offset=".5" stop-color="#4d55bd"/>
                <stop offset="1" stop-color="#3940ab"/>
              </linearGradient>
              <path fill="url(#a)" d="M95.01 466.5h950.312c52.473 0 95.01 42.538 95.01 95.01v950.312c0 52.473-42.538 95.01-95.01 95.01H95.01c-52.473 0-95.01-42.538-95.01-95.01V561.51c0-52.472 42.538-95.01 95.01-95.01z"/>
              <path fill="#FFF" d="M820.211 828.193h-189.97v517.297h-121.03V828.193H320.123V727.844h500.088v100.349z"/>
            </svg>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>]]></template>
    </sp_widget>
</record_update>
