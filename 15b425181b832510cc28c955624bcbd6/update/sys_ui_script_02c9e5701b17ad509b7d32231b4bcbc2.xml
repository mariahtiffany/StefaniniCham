<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_script">
    <sys_ui_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <description/>
        <global>false</global>
        <ignore_in_now_experience>false</ignore_in_now_experience>
        <name>x_stefa_chameleon.Load Persona Backgroun</name>
        <script><![CDATA[var x_stefa_chameleon = x_stefa_chameleon || {};

x_stefa_chameleon.LoadPersonaBackground = (function() {
	"use strict";

	var cssVariableName = '--main-bg-image';
	var bodyDomSelector = 'main.body';
	
	return {
		loadPersonaBackground: function () {
			var ga = new GlideAjax('x_stefa_chameleon.GetUserPersonas');
			ga.addParam('sysparm_name', 'getBackgroundImage');
			ga.getXML(function (response) {
				var backgroundImage = response.responseXML.documentElement.getAttribute("answer");
				
				var tryLoad = function () {
					var element = document.querySelector(bodyDomSelector);
					
					if (!element) {
						return setTimeout(tryLoad, 100);
					}
					
					element.style.setProperty(cssVariableName, 'url("' + backgroundImage + '")');
				};
				
				tryLoad();
			});
		},
		type:  "Load Persona Background"
	};
})();

x_stefa_chameleon.LoadPersonaBackground.loadPersonaBackground();]]></script>
        <script_name>Load Persona Background</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>vinicius.lourenco@stefanini.com</sys_created_by>
        <sys_created_on>2023-06-05 18:53:03</sys_created_on>
        <sys_id>02c9e5701b17ad509b7d32231b4bcbc2</sys_id>
        <sys_mod_count>14</sys_mod_count>
        <sys_name>x_stefa_chameleon.Load Persona Backgroun</sys_name>
        <sys_package display_value="Chameleon" source="x_stefa_chameleon">15b425181b832510cc28c955624bcbd6</sys_package>
        <sys_policy/>
        <sys_scope display_value="Chameleon">15b425181b832510cc28c955624bcbd6</sys_scope>
        <sys_update_name>sys_ui_script_02c9e5701b17ad509b7d32231b4bcbc2</sys_update_name>
        <sys_updated_by>vinicius.lourenco@stefanini.com</sys_updated_by>
        <sys_updated_on>2023-06-05 19:37:40</sys_updated_on>
        <ui_type>0</ui_type>
        <use_scoped_format>false</use_scoped_format>
    </sys_ui_script>
</record_update>
